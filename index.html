<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Instagram Follower Cleaner</title>
    <link rel="stylesheet" href="style.css" />
</head>
      
<body>
  <h1>âœ¨ IG List Cleaner âœ¨</h1>

  <label><strong>Paste Followers List:</strong></label><br/>
  <textarea id="followersInput" placeholder="Paste followers text here..."></textarea><br/>

  <label><strong>Paste Following List:</strong></label><br/>
  <textarea id="followingInput" placeholder="Paste following text here..."></textarea><br/>

  <button onclick="compareLists()">Compare</button>

  <div id="loader" class="loader">Scanning your listsâ€¦ Beep boop ðŸ¤–âœ¨</div>

  <h3>âœ… Mutuals (follow each other):</h3>
  <ul id="mutuals"></ul>

  <h3>ðŸš« You follow them, but they donâ€™t follow you back:</h3>
  <ul id="notFollowingBack"></ul>

  <h3>ðŸ‘€ They follow you, but you donâ€™t follow back:</h3>
  <ul id="youDontFollowBack"></ul>

  <h3>ðŸ§¹ Entries we swept under the digital rug:</h3>
  <p class="note">We cleaned up your lists to try and only reflect actual usernames â€” but hereâ€™s the junk we filtered out:</p>
  <ul id="invalidEntries"></ul>

  <script>
    function extractUsernames(text, invalidCollector) {
      const lines = text.split('\n');
      const validUsernames = [];
      const seenInvalid = new Set();
      const usernameRegex = /^[a-z0-9._]+$/;

      for (let line of lines) {
        const possibleWords = line.trim().split(/\s+/);
        for (let word of possibleWords) {
          if (usernameRegex.test(word)) {
            validUsernames.push(word);
          } else if (word.length > 1 && !usernameRegex.test(word)) {
            seenInvalid.add(word);
          }
        }
      }

      if (invalidCollector) {
        invalidCollector.push(...seenInvalid);
      }

      return [...new Set(validUsernames)];
    }

    function displayList(id, data) {
      const container = document.getElementById(id);
      container.innerHTML = data.length
        ? data.map(u => `<li><a href="https://instagram.com/${u}" target="_blank">${u}</a></li>`).join('')
        : '<li>None</li>';
    }

    function displayInvalid(id, data) {
      const container = document.getElementById(id);
      container.innerHTML = data.length
        ? data.map(u => `<li>${u}</li>`).join('')
        : '<li>None</li>';
    }

    function compareLists() {
      const loader = document.getElementById('loader');
      loader.style.display = 'block';

      setTimeout(() => {
        const followersRaw = document.getElementById('followersInput').value;
        const followingRaw = document.getElementById('followingInput').value;

        const invalidEntries = [];
        const followers = extractUsernames(followersRaw, invalidEntries);
        const following = extractUsernames(followingRaw, invalidEntries);

        const mutuals = followers.filter(u => following.includes(u));
        const notFollowingBack = following.filter(u => !followers.includes(u));
        const youDontFollowBack = followers.filter(u => !following.includes(u));

        displayList('mutuals', mutuals);
        displayList('notFollowingBack', notFollowingBack);
        displayList('youDontFollowBack', youDontFollowBack);
        displayInvalid('invalidEntries', [...new Set(invalidEntries)]);

        loader.style.display = 'none';
      }, 1000); // fake "loading" delay
    }
  </script>
</body>
</html>
